import { Story, Preview, Meta } from "@storybook/addon-docs/blocks";
import {
  boolean,
  select,
  number,
  text,
  withKnobs,
} from "@storybook/addon-knobs";
import { action, decorate } from "@storybook/addon-actions";
import readme from "./readme.md";

<Meta
  title="Atoms/Select"
  component="p6-select"
  parameters={{ notes: readme }}
/>

# Select

`p6-select` provides a select

<Story
  name="Default"
  parameters={{ docs: { disable: true } }}
  decorators={[withKnobs]}
>
  {() => {
    const values = decorate([
      (args) => {
        var values = [];
        new FormData(args[0].target).forEach(function (value, name) {
          values.push({ name, value });
        });
        return values;
      },
    ]);
    const kSizes = select(
      "Size",
      ["default", "small", "normal", "medium", "large"],
      "default"
    );
    const kColors = select(
      "Color",
      ["default", "primary", "info", "success", "warning", "danger"],
      "default"
    );
    const kLocales = select("Language", ["en", "fr", "ru"], "en");
    const kMultiple = boolean("Multiple", true);
    const kSearchEnabled = boolean("Search enabled", true);
    const kRequired = boolean("Required", true);
    const kShouldSort = boolean("Should sort", false);
    const kDisabled = boolean("Disabled", false);
    const kReadOnly = boolean("Read only", false);
    const kPlaceholder = text("Placeholder", "This is a placeholder");
    const formContent = `
      <p6-select
        name="test"
        lang="${kLocales}"
        disabled="${kDisabled}"
        multiple="${kMultiple}"
        searchEnabled="${kSearchEnabled}"
        shouldSort="${kShouldSort}"
        required="${kRequired}"
        readOnly="${kReadOnly}"
        placeholder="${kPlaceholder}"
        class="is-${kColors}"
        size="${kSizes}"
        >
        <option>Select dropdown</option>
        <option selected>With options</option>
        <option disabled>and disabled options</option>
      </p6-select>
      <div class="field">
        <div class="control">
          <p6-button class="button is-link">Submit</p6-button>
          <p6-button class="button is-link" type="reset">Reset</p6-button>
        </div>
      </div>
    `;
    const form = document.createElement("form");
    //form.noValidate = true;
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      values.action("values")(e);
      action("event")(e);
    });
    form.innerHTML = formContent;
    return form;
  }}
</Story>

<Story name="Selected value" parameters={{ docs: { disable: true } }}>
  {`
      <p6-select name="test">
        <option>One</option>
        <option selected>Selected</option>
        <option>Three</option>
      </p6-select>
    `}
</Story>

<Story name="Multiple selected value" parameters={{ docs: { disable: true } }}>
  {`
      <p6-select name="test" multiple>
        <option>One</option>
        <option selected>Two</option>
        <option selected>Three</option>
      </p6-select>
    `}
</Story>

<Story name="Disabled" parameters={{ docs: { disable: true } }}>
  {`
      <p6-select name="test" disabled>
        <option>One</option>
        <option>Two</option>
        <option>Three</option>
      </p6-select>
    `}
</Story>

<Story
  name="Custom search placeholder"
  parameters={{ docs: { disable: true } }}
>
  {`
      <p6-select name="test" placeholder="Custom placeholder">
        <option>One</option>
        <option>Two</option>
        <option>Three</option>
      </p6-select>
    `}
</Story>

<Story name="Without search" parameters={{ docs: { disable: true } }}>
  {`
      <p6-select name="test" searchEnabled="false">
        <option>One</option>
        <option>Two</option>
        <option>Three</option>
      </p6-select>
    `}
</Story>

<Story
  name="Language"
  parameters={{ docs: { disable: true } }}
  decorators={[withKnobs]}
>
  {() => {
    const kLocales = select("Language", ["en", "fr", "ru"], "en");
    return `
      <p6-select name="test" multiple lang="${kLocales}">
        <option>One</option>
        <option>Two</option>
        <option>Three</option>
      </p6-select>
    `;
  }}
</Story>

<Story name="Placeholder" parameters={{ docs: { disable: true } }}>
  {`
      <p6-select name="test">
        <option value="">This is the placeholder</option>
        <option>One</option>
        <option>Two</option>
        <option>Three</option>
      </p6-select>
    `}
</Story>

<Story name="Sizes" parameters={{ docs: { disable: true } }}>
  {`
      <p6-select name="test" size="default">
        <option>Default = Small</option>
        <option>Other</option>
      </p6-select>
      <p6-select name="test" size="small">
        <option>Small</option>
        <option>Other</option>
      </p6-select>
      <p6-select name="test" size="normal">
        <option>Normal</option>
        <option>Other</option>
      </p6-select>
      <p6-select name="test" size="medium">
        <option>Medium</option>
        <option>Other</option>
      </p6-select>
      <p6-select name="test" size="large">
        <option>Large</option>
        <option>Other</option>
      </p6-select>
      <p6-select name="test" multiple size="default">
        <option selected>Default = Small</option>
        <option>Other</option>
      </p6-select>
      <p6-select name="test" multiple size="small">
        <option selected>Small</option>
        <option>Other</option>
      </p6-select>
      <p6-select name="test" multiple size="normal">
        <option selected>Normal</option>
        <option>Other</option>
      </p6-select>
      <p6-select name="test" multiple size="medium">
        <option selected>Medium</option>
        <option>Other</option>
      </p6-select>
      <p6-select name="test" multiple size="large">
        <option selected>Large</option>
        <option>Other</option>
      </p6-select>
    `}
</Story>

<Story name="Colors" parameters={{ docs: { disable: true } }}>
  {`
      <p6-select name="test">
        <option>Default</option>
      </p6-select>
      <p6-select name="test" class="is-primary">
        <option>Primary</option>
      </p6-select>
      <p6-select name="test" class="is-info">
        <option>Info</option>
      </p6-select>
      <p6-select name="test" class="is-success">
        <option>Success</option>
      </p6-select>
      <p6-select name="test" class="is-warning">
        <option>Warning</option>
      </p6-select>
      <p6-select name="test" class="is-danger">
        <option>Danger</option>
      </p6-select>
    `}
</Story>
