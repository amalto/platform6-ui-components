@import '@fortawesome/fontawesome-svg-core/styles';
@import '@creativebulma/bulma-tooltip/src/sass/index';

$tabs-link-active-border-top-color: $primary;
$tabs-link-active-color: $success;

$tabs-border-bottom-color: $border !default;
$tabs-border-bottom-style: solid !default;
$tabs-border-bottom-width: 1px !default;
$tabs-link-color: $text !default;
$tabs-link-hover-border-bottom-color: $text-strong !default;
$tabs-link-hover-color: $text-strong !default;
$tabs-link-active-border-top-color: $link !default;
$tabs-link-active-color: $link !default;
$tabs-link-padding: 0.5em 1em !default;
$tabs-link-max-width: 7rem;

$tabs-boxed-link-radius: $radius !default;
$tabs-boxed-link-hover-background-color: $background !default;
$tabs-boxed-link-hover-border-bottom-color: $border !default;

$tabs-boxed-link-active-background-color: $scheme-main !default;
$tabs-boxed-link-active-border-color: $border !default;
$tabs-boxed-link-active-border-bottom-color: transparent !default;

$tabs-toggle-link-border-color: $border !default;
$tabs-toggle-link-border-style: solid !default;
$tabs-toggle-link-border-width: 1px !default;
$tabs-toggle-link-hover-background-color: $background !default;
$tabs-toggle-link-hover-border-color: $border-hover !default;
$tabs-toggle-link-radius: $radius !default;
$tabs-toggle-link-active-background-color: $link !default;
$tabs-toggle-link-active-border-color: $link !default;
$tabs-toggle-link-active-color: $link-invert !default;

:host {
  display: block;

  .tabs {
    -webkit-overflow-scrolling: touch;
    @include unselectable;

    align-items: stretch;
    display: flex;
    font-size: $size-normal;
    justify-content: space-between;
    overflow: visible;
    white-space: nowrap;
    margin-bottom: 0;
    position: relative;
    z-index: 100;

    a {
      align-items: center;
      border-bottom-color: $tabs-border-bottom-color;
      border-bottom-style: $tabs-border-bottom-style;
      border-bottom-width: $tabs-border-bottom-width;
      color: $tabs-link-color;
      display: flex;
      justify-content: center;
      margin-bottom: -#{$tabs-border-bottom-width};
      padding: $tabs-link-padding;
      vertical-align: top;
      cursor: pointer;
      text-decoration: none !important;
      position: relative;
      max-width: $tabs-link-max-width;

      .title {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .delete.disabled-close {
        display: none;
      }

      .delete:not(.disabled-close) {
        @include delete;
      }

      &:hover {
        border-bottom-color: $tabs-link-hover-border-bottom-color;
        color: $tabs-link-hover-color;
      }
    }

    &.is-boxed a {
      border: 1px solid transparent;
      border-radius: $tabs-boxed-link-radius $tabs-boxed-link-radius 0 0;
    }
    &.is-toggle a {
      border-color: $tabs-toggle-link-border-color;
      border-style: $tabs-toggle-link-border-style;
      border-width: $tabs-toggle-link-border-width;
      margin-bottom: 0;
      position: relative;
    }

    li {
      display: block;

      a:not(.is-active) {
        background-color: $grey-lightest;
        border-left: 1px solid $white;
        border-right: 1px solid $white;
      }

      a.is-active,
      &.is-active a {
        border-top: 2px solid $tabs-link-active-border-top-color;
        border-left: 1px solid $tabs-boxed-link-hover-border-bottom-color;
        border-right: 1px solid $tabs-boxed-link-hover-border-bottom-color;
        border-bottom-color: $white;
        color: $tabs-link-active-color;
      }
    }

    &.is-boxed a:hover {
      background-color: $tabs-boxed-link-hover-background-color;
      border-bottom-color: $tabs-boxed-link-hover-border-bottom-color;
    }

    &.is-toggle a:hover {
      background-color: $tabs-toggle-link-hover-background-color;
      border-color: $tabs-toggle-link-hover-border-color;
      z-index: 2;
    }

    li a:hover:not(.is-active) {
      border-bottom-color: $tabs-link-hover-border-bottom-color;
      color: $tabs-link-hover-color;
    }

    ul {
      align-items: center;
      border-bottom-color: $tabs-border-bottom-color;
      border-bottom-style: $tabs-border-bottom-style;
      border-bottom-width: $tabs-border-bottom-width;
      display: flex;
      flex-grow: 1;
      flex-shrink: 0;
      justify-content: flex-start;
      margin: 0;
      padding: 0;

      &.is-left {
        padding-right: 0.75em;
      }

      &.is-center {
        flex: none;
        justify-content: center;
        padding-left: 0.75em;
        padding-right: 0.75em;
      }

      &.is-right {
        justify-content: flex-end;
        padding-left: 0.75em;
      }
    }

    .icon {
      &:first-child {
        margin-right: 0.5em;
      }

      &:last-child {
        margin-left: 0.5em;
      }
    }

    // Alignment
    &.is-centered {
      ul {
        justify-content: center;
      }
    }

    &.is-right {
      ul {
        justify-content: flex-end;
      }
    }

    // Styles
    &.is-boxed li {
      &.is-active {
        a {
          background-color: $tabs-boxed-link-active-background-color;
          border-color: $tabs-boxed-link-active-border-color;
          border-bottom-color: $tabs-boxed-link-active-border-bottom-color !important;
        }
      }
    }

    &.is-fullwidth {
      li {
        flex-grow: 1;
        flex-shrink: 0;
      }
    }

    &.is-toggle {
      li {
        & + li {
          margin-left: -#{$tabs-toggle-link-border-width};
        }

        &:first-child a {
          border-top-left-radius: $tabs-toggle-link-radius;
          border-bottom-left-radius: $tabs-toggle-link-radius;
        }

        &:last-child a {
          border-top-right-radius: $tabs-toggle-link-radius;
          border-bottom-right-radius: $tabs-toggle-link-radius;
        }

        &.is-active {
          a {
            background-color: $tabs-toggle-link-active-background-color;
            border-color: $tabs-toggle-link-active-border-color;
            color: $tabs-toggle-link-active-color;
            z-index: 1;
          }
        }
      }

      ul {
        border-bottom: none;
      }

      &.is-toggle-rounded {
        li {
          &:first-child a {
            border-bottom-left-radius: $radius-rounded;
            border-top-left-radius: $radius-rounded;
            padding-left: 1.25em;
          }

          &:last-child a {
            border-bottom-right-radius: $radius-rounded;
            border-top-right-radius: $radius-rounded;
            padding-right: 1.25em;
          }
        }
      }
    }

    // Sizes
    &.is-small {
      font-size: $size-small;
    }

    &.is-medium {
      font-size: $size-medium;
    }

    &.is-large {
      font-size: $size-large;
    }
  }

  .tab-content {
    padding: $gap-size * 2 * 1px;
    border-left: 1px solid $tabs-border-bottom-color;
    border-right: 1px solid $tabs-border-bottom-color;
    border-bottom: 1px solid $tabs-border-bottom-color;
  }
}
